#!/bin/bash
pushd results

# find font families
declare -A families
for ttf in *.ttf
do
    family=$(echo $ttf | cut -d- -f 1)
    families[$family]=$family
done

# report on each set of font families (often there is only one family)
for family in ${families[*]}
do
    fontbakery check-profile silfont.fbtests.profile $family-*.ttf --html $family-fontbakery.html -F -S --succinct # -q
    for mode in add sub
    do
        fontspector --succinct --full-lists -p ~/script/silfonts-$mode.toml --html $family-fontspector-$mode.html $family-*.ttf # --use-python
    done
done

popd
